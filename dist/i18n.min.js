import*as DataTier from"./data-tier/data-tier.min.js";const r=[{id:"ar",dir:"rtl",lang:"ar",label:"عربى"},{id:"en",dir:"ltr",lang:"en",label:"English"},{id:"he",dir:"rtl",lang:"he",label:"עברית"},{id:"ru",dir:"ltr",lang:"ru",label:"Русский"}],e=DataTier.ties.create("l10n"),o={};let t;export{r as locales,n as getActiveLocale,i as setActiveLocale,a as initL10nPack,l as getL10n};function n(){return t}function i(e){if(!e)throw new Error('invalid locale "'+e+'"');const n="object"==typeof e?r.find(r=>r===e):r.find(r=>r.id===e);if(!n)throw new Error('failed to match "'+e+'" to any of known locales');t&&t.id===n.id||(t=n,document.documentElement.lang=t.id,document.body.dir=t.dir,Object.keys(o).forEach(c))}async function a(e,t){if(!e||"string"!=typeof e)throw new Error("key MUST be a non-empty string");if(Object.prototype.hasOwnProperty.call(o,e))throw new Error('l10n resource keyed "'+e+'" has already been registered');if(!t)throw new Error("invalid resource ("+t+")");if("object"!=typeof t)throw new Error("resource MUST be an object");r.forEach(r=>{if(r.required&&!(r.id in t))throw new Error('resource "'+e+'" missing ENTRY for the required locale "'+r.id+'"');if(r.required&&!t[r.id])throw new Error('resource "'+e+'" has INVALID ENTRY for the required locale "'+r.id+'"')}),o[e]=t,await c(e)}async function l(r){const e=t.id,n=o[r];if(n){if("object"==typeof n[e])return n[e];if("string"==typeof n[e]){const o=await fetch(n[e]);if(200===o.status){const r=await o.json();return n[e]=r,r}return console.error('failed to fetch l10n for locale "'+e+'", resource "'+r+'" by path "'+n[e]+'"'),null}throw new Error('no data found for locale "'+e+'", resource "'+r+'"')}throw new Error('l10n data was not registered for "'+r+'"')}async function c(r){try{e[r]=await l(r)}catch(e){console.error('failed to apply l10n change for "'+r+'"',e)}}i("en");