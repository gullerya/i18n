import*as DataTier from"./data-tier/data-tier.min.js";import{Observable as r}from"./data-tier/object-observer.min.js";const e=[{id:"ar",dir:"rtl",order:2,label:"عربى",enforce:!1},{id:"en",dir:"ltr",order:3,label:"English",enforce:!0},{id:"he",dir:"rtl",order:1,label:"עברית",enforce:!0},{id:"ru",dir:"ltr",order:4,label:"Русский",enforce:!1}],o=DataTier.ties.create("l10n",{}).model,t={},n=r.from({});export{e as locales,n as currentLocale,i as setActiveLocale,a as initL10nResource,c as getL10n,f as stringifyDateTime,l as roundNumber,s as joinTexts};function i(r){if(!r)throw new Error('invalid locale "'+r+'"');const o="object"==typeof r?e.find(e=>e===r):e.find(e=>e.id===r);if(!o)throw new Error('failed to match "'+r+'" to any of known locales');n.id!==o.id&&(Object.assign(n,o),document.documentElement.lang=n.id,document.body.dir=n.dir,Object.keys(t).forEach(d))}function a(r,o){if(!r||"string"!=typeof r)throw new Error("resource Id MUST be a non-empty string");if(Object.prototype.hasOwnProperty.call(t,r))throw new Error('l10n resource under ID "'+r+'" has already been registered');if(!o)throw new Error("invalid resource ("+o+")");if("object"!=typeof o)throw new Error("resource MUST be an object");e.forEach(e=>{if(e.enforce&&!(e.id in o))throw new Error('resource "'+r+'" missing ENTRY for the required locale "'+e.id+'"');if(e.enforce&&!o[e.id])throw new Error('resource "'+r+'" has INVALID ENTRY for the required locale "'+e.id+'"')}),t[r]=o,d(r)}async function c(r){const e=n.id,o=t[r];if(o){if("object"==typeof o[e])return o[e];if("string"==typeof o[e]){const t=await fetch(o[e]);if(200===t.status){const r=await t.json();return o[e]=r,r}return console.error('failed to fetch l10n for locale "'+e+'", resource "'+r+'" by path "'+o[e]+'"'),null}throw new Error('no data found for locale "'+e+'", resource "'+r+'"')}throw new Error('l10n data was not registered for "'+r+'"')}async function d(r){try{o[r]=await c(r)}catch(e){console.error('failed to apply l10n change for "'+r+'"',e)}}function f(r,e){if(!(r&&r instanceof Date))throw new Error("illagal date/time parameter provided "+r);return e&&"dd/mm/yyyy"!==e?null:r.getDate().toString().padStart(2,"0")+"/"+(r.getMonth()+1).toString().padStart(2,"0")+"/"+r.getFullYear()}function l(r,e){const o="string"==typeof r?parseFloat(r):r;if("number"!=typeof o||isNaN(o))return console.error('invalid argument "'+r+'", returning is as is'),r;if("number"==typeof e){const r=Math.pow(10,e);return Math.round(o*r)/r}return o}function s(r){switch(n.id){case"en":return r.join(" and ");case"he":return r.join(" ו");default:return r.join(", ")}}i("en");